#!/usr/bin/env python
from repo_scraper import filesystem as fs
from repo_scraper.FileChecker import FileChecker
import sys

folder_path = sys.argv[1] if len(sys.argv) > 1 else '.'

#List all files in directory
files = fs.list_files_in(folder_path)
#Ignore all inside .git/
files = filter(lambda x: '.git/' not in x,  files)
files = filter(lambda x: '/ETL/data_transformation/nc_email_htmls/' not in x,  files)
#Apply gitignore rules? don't rely too much on this since it could have been changed
#How to manage pyc files?

#File checker generator
results = (FileChecker(f).check() for f in files)

#Output results
for filename, status, matches in results:
    print '%s status is %s with matches %s\n' % (filename, status, matches)
        