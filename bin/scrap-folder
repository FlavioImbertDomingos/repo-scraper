#!/usr/bin/env python
from repo_scraper.FolderChecker import FolderChecker

import sys

folder_path = sys.argv[1] if len(sys.argv) > 1 else '.'
ignore_path = sys.argv[2] if len(sys.argv) > 2 else None

#Create an instance of folder checker,
#this class will list files in all subdirectories,
#then apply ignore file rules. It provides a generator
#to check each file
fc = FolderChecker(folder_path, ignore_path)

#Get the generator to traverse the folder structure
file_traverser = fc.file_traverser()

#results_to_print = ['ALERT', 'WARNING', 'NOTHING']
results_to_print = ['ALERT']

for result in file_traverser:
    if result.result_type in results_to_print:
        print f
        print '\t\t%s\n' % r.matches